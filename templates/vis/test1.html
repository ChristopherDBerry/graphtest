<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Network | Basic Usage | Standalone Build</title>

    <style type="text/css">
      html,
      body,
      #mynetwork {
        margin: 0px;
        padding: 0px;
      }

      #mynetwork {
        position: fixed;
        left: 0px;
        top: 0px;
        bottom: 0px;
        right: 10%;
        min-height: 100vh;
        border-right: 1px solid lightgray;
        background: white;
      }

      #text {
        position: absolute;
        left: 90%;
        padding: 1em;
      }

      #title {
        margin-bottom: 5em;
      }
    </style>

    <script src="https://code.jquery.com/jquery-3.6.3.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js" integrity="sha512-XHDcSyqhOoO2ocB7sKOCJEkUjw/pQCJViP1ynpy+EGh/LggzrP6U/V3a++LQTnZT7sCQKeHRyWHfhN2afjXjCg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fetch/3.6.2/fetch.min.js" integrity="sha512-1Gn7//DzfuF67BGkg97Oc6jPN6hqxuZXnaTpC9P5uw8C6W4yUNj5hoS/APga4g1nO2X6USBb/rXtGzADdaVDeA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  </head>

  <body>
    <div id="text">
      <label for="distance">Distance from homepage:</label>
      <select name="distance" id="distance">
        <option value="1" selected="selected">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
      </select>
    </div>

    <div id="mynetwork"></div>
    <script type="text/javascript">
//fetch('/json/vis/pages.json')
//fetch('/json/vis/pages/1')
fetch('/json/vis/pages/2')
  .then((response) => response.json())
  .then((data) => redrawMain(data.nodes, data.edges));

function redrawMain(nodes, edges) {
  console.log(data)
  var nodes = new vis.DataSet(nodes)
  // create a network
  var container = document.getElementById("mynetwork")
  var data = {
    nodes: nodes,
    edges: edges,
  }
  var options = {
    physics: {
        stabilization: {
            enabled: true,
            iterations: 125, // maximum number of iteration to stabilize
            updateInterval: 10,
            onlyDynamicEdges: false,
            fit: true
        },
    },
    interaction:{
      hover: true,
    },
    nodes: {
      color: {
        hover: {
          background: 'black',
          border: 'black',
        },
        border: '#EEEEEE',
      },
      borderWidth: 1,
      shape: 'dot',
      scaling: {
        min: 7,
        max: 11,
        label: {
          enabled: false,
          min: 8,
          max: 8,
        }
      },
    },
    edges: {
      smooth: false,
      color: {
        color: '#E1E1E1',
      },
    },
    groups: {
      ok: {
        color: {
          background: 'green',
        }
      },
      warning: {
        color: {
          background: 'orange',
        }
      },
      error: {
        label: '',
        color: {
          background: 'red',
        }
      },
      cluster: {
        font: '66px arial black',
        shape: 'box',
      }
    }
  }
  var network = new vis.Network(container, data, options)
}
/*
const functionThatDoesWhatYouNeed = () ={ 
    // Your code
    network.off('afterDrawing', functionThatDoesWhatYouNeed)
}
*/
//network.on('afterDrawing', functionThatDoesWhatYouNeed)

$(function() {

$("#distance").change(function() {
  console.log($(this).val())
})

})

    </script>
  </body>
</html>
